<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MySemester</title>
  <link rel="icon" type="image/png" href="/mysemesterlogo.png">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <link rel="stylesheet" href="main.css">
  <script type="module" src="main.module.js"></script>
</head>

<body>
  <div id="cloudSyncOverlay" class="sync-overlay" aria-hidden="true">
    <div class="sync-card" role="status" aria-live="polite">
      <div class="sync-spinner"></div>
      Syncing your courses...
    </div>
  </div>
  <header>
    <div class="brand">
      <ion-icon name="school-outline" style="font-size:22px;color:var(--blue)"></ion-icon>
      <h1>MySemester</h1>
    </div>

    <div class="h-controls"><div class="account-wrap">
        <button class="iconbtn avatar-btn" id="accountBtn" aria-label="Account">
          <img id="accountAvatar" alt="Profile" class="avatar-inset">
          <ion-icon id="accountIcon" name="person-circle-outline"></ion-icon>
        </button>
        <div class="account-dd" id="accountDd" role="menu" aria-label="Account menu">
          <div class="acc-row" id="accSummary">
            <div class="dd-avatar">
              <img id="accSummaryAvatar" alt="Profile">
              <ion-icon id="accSummaryIcon" name="person-circle-outline" style="font-size:24px"></ion-icon>
            </div>
            <div class="acc-meta">
              <span class="acc-name" id="accName">Guest</span>
              <span class="acc-user" id="accEmail">Not signed in</span>
            </div>
          </div>
          <div class="acc-actions" id="accActionsSignedOut">
            <a href="/login/"><ion-icon name="log-in-outline"></ion-icon> Sign in</a>
            <a href="/signup/"><ion-icon name="person-add-outline"></ion-icon> Create account</a>
          </div>
          <div class="acc-actions" id="accActionsSignedIn" style="display:none">
            <button id="goProfile"><ion-icon name="person-outline"></ion-icon> Profile</button>
            <button id="signOut"><ion-icon name="log-out-outline"></ion-icon> Sign out</button>
          </div>
          <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center; padding: 0 6px;">
            <span class="chip"><ion-icon name="id-card-outline"></ion-icon> Private</span>
            <span class="chip" id="chipWelcome">Welcome</span>
          </div>
        </div>
      </div><button class="iconbtn" id="themeToggle" aria-label="Toggle theme">
        <ion-icon id="themeIcon" name="moon-outline"></ion-icon>
      </button><button class="iconbtn menu-icon" id="menuToggle" aria-label="Open Menu">
        <ion-icon name="menu-outline"></ion-icon>
      </button>
    </div>
  </header><div class="overlay" id="overlay"></div>

  <aside class="sidebar" id="sidebar" aria-label="Sidebar Navigation">
    <button class="navbtn green" id="openAddCourse"><ion-icon name="add-circle-outline"></ion-icon> Add Course</button>
    <button class="navbtn blue" id="openSettings"><ion-icon name="settings-outline"></ion-icon> Settings</button>
    <button class="navbtn gray" id="openAbout"><ion-icon name="information-circle-outline"></ion-icon> About</button>
    <div class="sidebar-help">
      <div class="sidebar-help-title"><ion-icon name="help-circle-outline"></ion-icon> Quick Tip</div>
      <div class="sidebar-help-text">Right-click a course card for edit, duplicate, and more options.</div>
    </div>
    <div class="sidebar-section">
      <div class="sidebar-title">Academic Profile</div>
      <div class="sidebar-card">
        <span class="label">University</span>
        <span id="sidebarUniversity" class="value">Not set</span>
      </div>
      <div class="sidebar-card">
        <span class="label">Year</span>
        <span id="sidebarYear" class="value">Not set</span>
      </div>
      <div class="sidebar-card">
        <span class="label">Program</span>
        <span id="sidebarProgram" class="value">Not set</span>
      </div>
    </div>
  </aside><dialog id="aboutModal">
    <div class="modal-head about-modal-head">
      <ion-icon name="information-circle-outline"></ion-icon>
      <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;display:flex;align-items:center;gap:10px;">
        About MySemester
      </span>
    </div>
    <div class="modal-body about-modal-body" style="padding:0;">
      <div class="about-content">
        <div class="about-hero">
          <span class="about-kicker">MySemester</span>
          <h2>Built to make grade tracking feel effortless.</h2>
          <p>MySemester is a modern grade tracking platform built for Canadian universities. It gives you a clean, fast dashboard to manage courses, track assessments, and keep your academic progress organized.</p>
          <div class="about-actions">
            <a class="about-link" href="/gpa-scale/" target="_blank" rel="noopener">
              <ion-icon name="school-outline"></ion-icon>
              GPA scaling by university
            </a>
          </div>
        </div>

        <div class="about-grid">
          <div class="about-card">
            <div class="about-card-icon"><ion-icon name="layers-outline"></ion-icon></div>
            <div>
              <h4>Course tracking</h4>
              <p>Add courses, manage weights, and keep grades tidy in one place.</p>
            </div>
          </div>
          <div class="about-card">
            <div class="about-card-icon"><ion-icon name="speedometer-outline"></ion-icon></div>
            <div>
              <h4>Smart estimates</h4>
              <p>Set targets and instantly see what you need on remaining work.</p>
            </div>
          </div>
          <div class="about-card">
            <div class="about-card-icon"><ion-icon name="sparkles-outline"></ion-icon></div>
            <div>
              <h4>Flexible grading</h4>
              <p>Percent, letter, and university-specific credit options.</p>
            </div>
          </div>
          <div class="about-card">
            <div class="about-card-icon"><ion-icon name="cloud-outline"></ion-icon></div>
            <div>
              <h4>Cloud sync</h4>
              <p>Access your dashboard across devices when signed in.</p>
            </div>
          </div>
        </div>

        <div class="about-divider"></div>
        <div class="about-section">
          <h3>Core Features</h3>
          <ul class="about-list">
            <li><strong>Course &amp; Assessment Tracking</strong> — add courses, manage weights, and save grades quickly</li>
            <li><strong>Smart Estimates</strong> — set a target and calculate what you need on remaining work</li>
            <li><strong>Flexible Grading</strong> — supports percent, letter, and university-specific credit options</li>
            <li><strong>Cloud Sync</strong> — access the same data across devices when signed in</li>
            <li><strong>Import &amp; Export</strong> — back up or move your courses anytime</li>
            <li><strong>Guided Onboarding</strong> — setup flow + quick tour for new users</li>
          </ul>
        </div>

        <div class="about-divider"></div>
        <div class="about-section">
          <h3>What’s Next</h3>
          <ul class="about-list">
            <li>More university-specific grading profiles</li>
            <li>Smarter analytics and trend insights</li>
            <li>Enhanced course templates and presets</li>
            <li>Optional notifications and reminders</li>
          </ul>
        </div>

        <div class="about-divider"></div>
        <div class="about-section">
          <h3>Contact</h3>
          <p>For inquiries, suggestions, or collaboration opportunities, please reach out via email at
          <a href="mailto:jamie.mails07@gmail.com">jamie.mails07@gmail.com</a>. I’m always open to ideas that make student life simpler and smarter.</p>
        </div>
      </div>
    </div>
    <div class="modal-actions about-modal-actions">
      <button type="button" class="btn-plain" id="closeAbout">Close</button>
    </div>
  </dialog>
  
  <dialog id="settingsModal">
    <div class="modal-head">
      <ion-icon name="settings-outline"></ion-icon>
      <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;display:flex;align-items:center;gap:10px;">
        Settings
      </span>
    </div>
    <div class="modal-body" style="gap: 26px;"><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="color-palette-outline"></ion-icon><span>Theme</span></div>
        <div class="settings-theme-btnrow">
          <button type="button" class="settings-theme-btn" data-theme="light"><ion-icon name="sunny-outline"></ion-icon> Light</button>
          <button type="button" class="settings-theme-btn" data-theme="dark"><ion-icon name="moon-outline"></ion-icon> Dark</button>
          <button type="button" class="settings-theme-btn" data-theme="system"><ion-icon name="desktop-outline"></ion-icon> System</button>
        </div>
      </section><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="grid-outline"></ion-icon><span>Dashboard Layout</span></div>
        <div class="settings-radio-row">
          <label class="settings-radio">
            <input type="radio" name="layout" value="compact" class="settings-layout-radio" />
            <span>Compact</span>
          </label>
          <label class="settings-radio">
            <input type="radio" name="layout" value="spacious" class="settings-layout-radio" />
            <span>Spacious</span>
          </label>
        </div>
      </section><section class="settings-card" id="gpaSettingsCard">
        <div class="settings-card-title"><ion-icon name="stats-chart-outline"></ion-icon><span>Default GPA Format</span></div>
        <div class="settings-toggle-row">
          <button type="button" class="settings-gpa-btn" data-gpa="4.0">4.0</button>
          <button type="button" class="settings-gpa-btn" data-gpa="%">%</button>
        </div>
      </section><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="speedometer-outline"></ion-icon><span>Estimate Target</span></div>
        <div class="settings-toggle-row">
          <button type="button" class="settings-estimate-btn" data-estimate="85">85</button>
          <button type="button" class="settings-estimate-btn" data-estimate="90">90</button>
          <button type="button" class="settings-estimate-btn" data-estimate="95">95</button>
          <div class="settings-estimate-input">
            <span>Custom</span>
            <input type="number" id="estimateTargetInput" min="50" max="100" step="1" placeholder="e.g. 88">
          </div>
        </div>
      </section><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="cloud-download-outline"></ion-icon><span>Data Controls</span></div>
        <div class="settings-data-btnrow">
          <button type="button" class="btn-plain" id="exportCoursesBtn"><ion-icon name="download-outline"></ion-icon> Export Courses</button>
          <button type="button" class="btn-plain" id="importCoursesBtn"><ion-icon name="cloud-upload-outline"></ion-icon> Import Courses</button>
          <button type="button" class="btn-plain danger" id="resetDataBtn"><ion-icon name="refresh-outline"></ion-icon> Reset All Data</button>
        </div>
        <input type="file"
               id="importCoursesFile"
               accept="application/json"
               style="display:none;">
      </section>
    </div>
    <div class="modal-actions">
      <button type="button" class="btn-primary" id="saveSettingsBtn">Save</button>
      <button type="button" class="btn-plain" id="closeSettings">Close</button>
    </div>
  </dialog>
  <script src="main.js" defer></script>
  <main class="wrap">
    <section class="hero">
      <h2 id="welcomeTitle">Welcome, Jamie</h2>
      <p>Courses and academic overview</p>
    </section>

    <section class="grid" id="courseGrid"></section>

    <section class="overview" id="overview">
      <div class="ov"><div class="label">GPA (4.0)</div><div class="value" id="gpa4">0.00</div></div>
      <div class="ov"><div class="label">Letter Avg</div><div class="value" id="gpaLetter">—</div></div>
      <div class="ov"><div class="label">Percent Avg</div><div class="value" id="gpaPct">0%</div></div>
    </section>

    <footer>© 2026 MySemester. All Rights Reserved.</footer><dialog id="profileModal">
      <form id="profileForm" style="margin:0; max-width: 860px;">
        <div class="modal-head">
          <ion-icon name="person-outline"></ion-icon>
          <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;">Profile</span>
        </div>

        <div class="modal-body" style="background:var(--bg);padding:28px 32px;display:flex;flex-direction:column;gap:24px;"><div style="display:flex;align-items:center;gap:22px;flex-wrap:wrap;">
            <div style="position:relative;display:flex;align-items:center;justify-content:center;">
              <img id="profilePicPreview" src="https://api.dicebear.com/7.x/initials/svg?seed=User"
                   alt="Profile Picture"
                   style="width:100px;height:100px;border-radius:50%;object-fit:cover;border:3px solid var(--line);background:#f3f4f6;">
              <label for="profilePicInput"
                     style="position:absolute;bottom:-8px;right:-8px;background:var(--blue);color:white;padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.15);">Change</label>
              <input type="file" id="profilePicInput" accept="image/*" style="display:none;" />
            </div>
            <div style="flex:1;min-width:220px;">
              <p style="font-size:13px;color:var(--muted);margin:4px 0 0;">PNG or JPG, up to ~3MB</p>
            </div>
          </div>
          <div class="profile-academic">
            <div class="profile-academic-title">Academic Profile</div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
              <div>
                <label style="font-size:13px;font-weight:600;color:var(--muted);">University</label>
                <input id="profileUniversityInput" class="profile-input readonly-field" placeholder="University" readonly aria-readonly="true" />
              </div>
              <div>
                <label style="font-size:13px;font-weight:600;color:var(--muted);">Year</label>
                <div class="profile-select-wrap" id="profileYearWrap">
                  <button type="button" class="profile-select-button" id="profileYearButton">Select year</button>
                  <input type="hidden" id="profileYearSelect" value="">
                  <div class="profile-select-menu" id="profileYearMenu" role="listbox">
                    <button type="button" class="profile-select-option" data-value="Year 1">Year 1</button>
                    <button type="button" class="profile-select-option" data-value="Year 2">Year 2</button>
                    <button type="button" class="profile-select-option" data-value="Year 3">Year 3</button>
                    <button type="button" class="profile-select-option" data-value="Year 4">Year 4</button>
                  </div>
                </div>
              </div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
              <div>
                <label style="font-size:13px;font-weight:600;color:var(--muted);">Program</label>
                <div class="profile-select-wrap" id="profileProgramWrap">
                  <button type="button" class="profile-select-button" id="profileProgramButton">Select program</button>
                  <input type="hidden" id="profileProgramInput" value="">
                  <div class="profile-select-menu" id="profileProgramMenu" role="listbox">
                    <button type="button" class="profile-select-option" data-value="Accounting">Accounting</button>
                    <button type="button" class="profile-select-option" data-value="Architecture">Architecture</button>
                    <button type="button" class="profile-select-option" data-value="Biology">Biology</button>
                    <button type="button" class="profile-select-option" data-value="Biomedical Engineering">Biomedical Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Business Administration">Business Administration</button>
                    <button type="button" class="profile-select-option" data-value="Chemical Engineering">Chemical Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Chemistry">Chemistry</button>
                    <button type="button" class="profile-select-option" data-value="Civil Engineering">Civil Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Computer Engineering">Computer Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Computer Science">Computer Science</button>
                    <button type="button" class="profile-select-option" data-value="Economics">Economics</button>
                    <button type="button" class="profile-select-option" data-value="Electrical Engineering">Electrical Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Engineering">Engineering</button>
                    <button type="button" class="profile-select-option" data-value="English">English</button>
                    <button type="button" class="profile-select-option" data-value="Finance">Finance</button>
                    <button type="button" class="profile-select-option" data-value="History">History</button>
                    <button type="button" class="profile-select-option" data-value="Industrial Engineering">Industrial Engineering</button>
                    <button type="button" class="profile-select-option" data-value="International Relations">International Relations</button>
                    <button type="button" class="profile-select-option" data-value="Life Sciences">Life Sciences</button>
                    <button type="button" class="profile-select-option" data-value="Marketing">Marketing</button>
                    <button type="button" class="profile-select-option" data-value="Mathematics">Mathematics</button>
                    <button type="button" class="profile-select-option" data-value="Mechanical Engineering">Mechanical Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Neuroscience">Neuroscience</button>
                    <button type="button" class="profile-select-option" data-value="Nursing">Nursing</button>
                    <button type="button" class="profile-select-option" data-value="Philosophy">Philosophy</button>
                    <button type="button" class="profile-select-option" data-value="Physics">Physics</button>
                    <button type="button" class="profile-select-option" data-value="Political Science">Political Science</button>
                    <button type="button" class="profile-select-option" data-value="Psychology">Psychology</button>
                    <button type="button" class="profile-select-option" data-value="Public Health">Public Health</button>
                    <button type="button" class="profile-select-option" data-value="Sociology">Sociology</button>
                    <button type="button" class="profile-select-option" data-value="Software Engineering">Software Engineering</button>
                    <button type="button" class="profile-select-option" data-value="Statistics">Statistics</button>
                    <button type="button" class="profile-select-option" data-value="Urban Planning">Urban Planning</button>
                    <button type="button" class="profile-select-option" data-value="Other">Other</button>
                  </div>
                </div>
              </div>
              <div></div>
            </div>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Full Name</label>
              <input id="profileNameInput" type="text" placeholder="Full Name" />
            </div>
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Nickname</label>
              <input id="profileNickInput" type="text" placeholder="Preferred Nickname" />
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Email</label>
              <input id="profileEmailInput" type="email" placeholder="you@example.com" />
            </div>
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Current Password</label>
              <div class="pw-field" style="position:relative;">
                <input id="profileCurrentPw" type="password" placeholder="Current password" style="width:100%;" />
                <ion-icon name="eye-outline" class="pw-eye" data-target="profileCurrentPw"
                          style="position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:18px;color:var(--muted);cursor:pointer;"></ion-icon>
              </div>
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">New Password</label>
              <div class="pw-field" style="position:relative;">
                <input id="profileNewPw" type="password" placeholder="New password" style="width:100%;" />
                <ion-icon name="eye-outline" class="pw-eye" data-target="profileNewPw"
                          style="position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:18px;color:var(--muted);cursor:pointer;"></ion-icon>
              </div>
            </div>
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Confirm New Password</label>
              <div class="pw-field" style="position:relative;">
                <input id="profilePasswordInput" type="password" placeholder="Confirm new password" style="width:100%;" />
                <ion-icon name="eye-outline" class="pw-eye" data-target="profilePasswordInput"
                          style="position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:18px;color:var(--muted);cursor:pointer;"></ion-icon>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-actions" style="padding:18px 32px;display:flex;justify-content:flex-end;gap:12px;">
          <button type="button" class="btn-plain" id="profileCancelBtn">Cancel</button>
          <button type="submit" class="btn-primary">Save Changes</button>
        </div>
      </form>
    </dialog></main><div class="ctx" id="ctxMenu" role="menu">
    <button type="button" data-act="edit"><ion-icon name="create-outline"></ion-icon> Edit course</button>
    <button type="button" data-act="dup"><ion-icon name="copy-outline"></ion-icon> Duplicate</button>
    <button type="button" data-act="crncr">
      <ion-icon name="shield-checkmark-outline"></ion-icon>
      <span id="ctxCrncrLabel">Set CR/NCR</span>
    </button>
    <button type="button" class="danger" data-act="del"><ion-icon name="trash-outline"></ion-icon> Remove</button>
  </div><dialog id="addCourseModal">
    <form id="addCourseForm">
      <div class="modal-head"><ion-icon name="add-circle-outline"></ion-icon> <span id="modalTitle">Add Course</span></div>
      <div class="modal-body">
        <div class="modal-grid">
          <div id="courseCodeField">
            <label>Course Code</label>
            <input name="code" id="codeInput" placeholder="CSC108" />
          </div>
          <div id="courseNameField">
            <label>Course Name</label>
            <input name="title" id="titleInput" placeholder="Intro to Computer Science" />
          </div>
        </div>
        <div class="modal-grid">
          <div id="initialGradeField">
            <label>Initial Grade (%) — optional</label>
            <input name="grade" id="gradeInput" type="number" step="0.1" min="0" max="100" placeholder="e.g., 85" />
          </div>
          <div id="iconField">
            <label>Icon</label>
            <input name="icon" id="iconInput" placeholder="e.g., laptop-outline" />
            <div class="hint">Preview: <ion-icon id="iconPreview" name="book-outline"></ion-icon></div>
            <div class="hint" style="margin-bottom:2px;">
              <span class="icon-try-row-toggle" id="iconTryToggle" tabindex="0" role="button" aria-expanded="false">Try:</span>
            </div>
            <div class="icon-chip-row hide" id="iconChipRow" aria-hidden="true">
              <span class="icon-chip" data-icon="calculator-outline"><ion-icon name="calculator-outline"></ion-icon>calculator-outline <span style="color:var(--muted);font-weight:400;">(Math)</span></span>
              <span class="icon-chip" data-icon="laptop-outline"><ion-icon name="laptop-outline"></ion-icon>laptop-outline <span style="color:var(--muted);font-weight:400;">(CS)</span></span>
              <span class="icon-chip" data-icon="school-outline"><ion-icon name="school-outline"></ion-icon>school-outline <span style="color:var(--muted);font-weight:400;">(Philosophy)</span></span>
              <span class="icon-chip" data-icon="planet-outline"><ion-icon name="planet-outline"></ion-icon>planet-outline <span style="color:var(--muted);font-weight:400;">(Astronomy)</span></span>
              <span class="icon-chip" data-icon="stats-chart-outline"><ion-icon name="stats-chart-outline"></ion-icon>stats-chart-outline <span style="color:var(--muted);font-weight:400;">(Stats)</span></span>
            </div>
          </div>
        </div>
        <div class="error" id="formError">Please enter at least a course code (e.g., CSC108).</div>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn-plain" id="cancelCourse">Cancel</button>
        <button type="submit" class="btn-primary" id="saveCourse">Save Course</button>
      </div>
    </form>
    <div class="tour-modal-mask" aria-hidden="true"></div>
  </dialog>

</dialog>

<div class="tour-overlay" id="tourOverlay" aria-hidden="true">
  <div class="tour-card no-arrow" role="dialog" aria-live="polite">
    <div class="tour-pill">Getting Started</div>
    <h3 id="tourTitle">Welcome to MySemester</h3>
    <p id="tourBody">Let’s set up your dashboard in a few quick steps.</p>
    <div class="tour-footer">
      <div class="tour-step">
        <span id="tourStepLabel">1 of 1</span>
        <div class="tour-dots" id="tourDots"></div>
      </div>
      <div class="tour-actions">
        <button class="tour-btn ghost" id="tourSkip" type="button">Skip</button>
        <button class="tour-btn primary" id="tourNext" type="button">Next</button>
      </div>
    </div>
  </div>
</div>

</body>
</html>
