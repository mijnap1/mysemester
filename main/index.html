<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MySemester</title>
  <link rel="icon" type="image/png" href="/mysemesterlogo.png">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <link rel="stylesheet" href="main.css">
  <script type="module" src="main.module.js"></script>
</head>

<body>
  <div id="cloudSyncOverlay" class="sync-overlay" aria-hidden="true">
    <div class="sync-card" role="status" aria-live="polite">
      <div class="sync-spinner"></div>
      Syncing your courses...
    </div>
  </div><header>
    <div class="brand">
      <ion-icon name="school-outline" style="font-size:22px;color:var(--blue)"></ion-icon>
      <h1>MySemester</h1>
    </div>

    <div class="h-controls"><div class="account-wrap">
        <button class="iconbtn avatar-btn" id="accountBtn" aria-label="Account">
          <img id="accountAvatar" alt="Profile" class="avatar-inset">
          <ion-icon id="accountIcon" name="person-circle-outline"></ion-icon>
        </button>
        <div class="account-dd" id="accountDd" role="menu" aria-label="Account menu">
          <div class="acc-row" id="accSummary">
            <div class="dd-avatar">
              <img id="accSummaryAvatar" alt="Profile">
              <ion-icon id="accSummaryIcon" name="person-circle-outline" style="font-size:24px"></ion-icon>
            </div>
            <div class="acc-meta">
              <span class="acc-name" id="accName">Guest</span>
              <span class="acc-user" id="accEmail">Not signed in</span>
            </div>
          </div>
          <div class="acc-actions" id="accActionsSignedOut">
            <a href="/login/"><ion-icon name="log-in-outline"></ion-icon> Sign in</a>
            <a href="/signup/"><ion-icon name="person-add-outline"></ion-icon> Create account</a>
          </div>
          <div class="acc-actions" id="accActionsSignedIn" style="display:none">
            <button id="goProfile"><ion-icon name="person-outline"></ion-icon> Profile</button>
            <button id="signOut"><ion-icon name="log-out-outline"></ion-icon> Sign out</button>
          </div>
          <div style="margin-top:10px; display:flex; justify-content:space-between; align-items:center; padding: 0 6px;">
            <span class="chip"><ion-icon name="id-card-outline"></ion-icon> Private</span>
            <span class="chip" id="chipWelcome">Welcome</span>
          </div>
        </div>
      </div><button class="iconbtn" id="themeToggle" aria-label="Toggle theme">
        <ion-icon id="themeIcon" name="moon-outline"></ion-icon>
      </button><button class="iconbtn menu-icon" id="menuToggle" aria-label="Open Menu">
        <ion-icon name="menu-outline"></ion-icon>
      </button>
    </div>
  </header><div class="overlay" id="overlay"></div>

  <aside class="sidebar" id="sidebar" aria-label="Sidebar Navigation">
    <button class="navbtn green" id="openAddCourse"><ion-icon name="add-circle-outline"></ion-icon> Add Course</button>
    <button class="navbtn blue" id="openSettings"><ion-icon name="settings-outline"></ion-icon> Settings</button>
    <button class="navbtn gray" id="openAbout"><ion-icon name="information-circle-outline"></ion-icon> About</button>
  </aside><dialog id="aboutModal">
    <div class="modal-head about-modal-head">
      <ion-icon name="information-circle-outline"></ion-icon>
      <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;display:flex;align-items:center;gap:10px;">
        About MySemester
      </span>
    </div>
    <div class="modal-body about-modal-body" style="padding:0;">
      <div class="about-content">
        <h2>About MySemester</h2>
        <p><ion-icon name="school-outline" style="color:#2563eb;margin-right:6px;vertical-align:middle;"></ion-icon>
MySemester is a modern web platform built primarily for University of Toronto students, designed to help you manage and visualize your academic progress with clarity. It gives you a fast, intuitive dashboard for tracking grades, as well as a clean, student-friendly interface so you always know where you stand and what you need to aim for.</p>

<div class="about-divider"></div>
<h3><ion-icon name="flash-outline" style="color:#2563eb;margin-right:6px;vertical-align:middle;"></ion-icon> Core Features</h3>
<ul>
  <li><strong>Real‑Time GPA Insights</strong> — dynamic GPA calculations in both 4.0 and percentage formats</li>
  <li><strong>Course Management</strong> — organize and edit courses effortlessly with auto‑icons</li>
  <li><strong>Adaptive Themes</strong> — light, dark, and system modes for personalized comfort</li>
  <li><strong>Local Privacy</strong> — your data stays stored safely in your browser</li>
  <li><strong>Performance Visualization</strong> — clean UI for monitoring trends and progress</li>
</ul>

<div class="about-divider"></div>
<h3><ion-icon name="code-slash-outline" style="color:#2563eb;margin-right:6px;vertical-align:middle;"></ion-icon> Technology Stack</h3>
<p>Developed using <strong>HTML</strong>, <strong>CSS</strong>, and <strong>JavaScript</strong>, with <strong>Ionicons</strong> for sleek visuals and <strong>Supabase</strong> for authentication and database connectivity. Every component is optimized for speed, accessibility, and consistency across devices.</p>

<div class="about-divider"></div>
<h3><ion-icon name="rocket-outline" style="color:#2563eb;margin-right:6px;vertical-align:middle;"></ion-icon> What’s Next</h3>
<ul>
  <li>Cloud‑based synchronization across devices</li>
  <li>AI‑driven grade and performance predictions</li>
  <li>Custom GPA analytics dashboards</li>
  <li>Collaborative study group features</li>
  <li>Progress milestone tracking and notifications</li>
</ul>

<div class="about-divider"></div>
<h3><ion-icon name="mail-outline" style="color:#2563eb;margin-right:6px;vertical-align:middle;"></ion-icon> Contact</h3>
<p>For inquiries, suggestions, or collaboration opportunities, please reach out via email at
<a href="mailto:jamie.mails07@gmail.com">jamie.mails07@gmail.com</a>. I’m always open to ideas that make student life simpler and smarter.</p>
      </div>
    </div>
    <div class="modal-actions about-modal-actions">
      <button type="button" class="btn-plain" id="closeAbout">Close</button>
    </div>
  </dialog>
  
  <dialog id="settingsModal">
    <div class="modal-head">
      <ion-icon name="settings-outline"></ion-icon>
      <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;display:flex;align-items:center;gap:10px;">
        Settings
      </span>
    </div>
    <div class="modal-body" style="gap: 26px;"><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="color-palette-outline"></ion-icon><span>Theme</span></div>
        <div class="settings-theme-btnrow">
          <button type="button" class="settings-theme-btn" data-theme="light"><ion-icon name="sunny-outline"></ion-icon> Light</button>
          <button type="button" class="settings-theme-btn" data-theme="dark"><ion-icon name="moon-outline"></ion-icon> Dark</button>
          <button type="button" class="settings-theme-btn" data-theme="system"><ion-icon name="desktop-outline"></ion-icon> System</button>
        </div>
      </section><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="grid-outline"></ion-icon><span>Dashboard Layout</span></div>
        <div class="settings-radio-row">
          <label class="settings-radio">
            <input type="radio" name="layout" value="compact" class="settings-layout-radio" />
            <span>Compact</span>
          </label>
          <label class="settings-radio">
            <input type="radio" name="layout" value="spacious" class="settings-layout-radio" />
            <span>Spacious</span>
          </label>
        </div>
      </section><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="stats-chart-outline"></ion-icon><span>Default GPA Format</span></div>
        <div class="settings-toggle-row">
          <button type="button" class="settings-gpa-btn" data-gpa="4.0">4.0</button>
          <button type="button" class="settings-gpa-btn" data-gpa="%">%</button>
        </div>
      </section><section class="settings-card">
        <div class="settings-card-title"><ion-icon name="cloud-download-outline"></ion-icon><span>Data Controls</span></div>
        <div class="settings-data-btnrow">
          <button type="button" class="btn-plain" id="exportCoursesBtn"><ion-icon name="download-outline"></ion-icon> Export Courses</button>
          <button type="button" class="btn-plain" id="importCoursesBtn"><ion-icon name="cloud-upload-outline"></ion-icon> Import Courses</button>
          <button type="button" class="btn-plain danger" id="resetDataBtn"><ion-icon name="refresh-outline"></ion-icon> Reset All Data</button>
        </div>
        <input type="file"
               id="importCoursesFile"
               accept="application/json"
               style="display:none;">
      </section>
    </div>
    <div class="modal-actions">
      <button type="button" class="btn-plain" id="closeSettings">Close</button>
    </div>
  </dialog>
  <script src="main.js" defer></script>
  <main class="wrap">
    <section class="hero">
      <h2 id="welcomeTitle">Welcome, Jamie</h2>
      <p>Courses and academic overview</p>
    </section>

    <section class="grid" id="courseGrid"></section>

    <section class="overview" id="overview">
      <div class="ov"><div class="label">GPA (4.0)</div><div class="value" id="gpa4">0.00</div></div>
      <div class="ov"><div class="label">Letter Avg</div><div class="value" id="gpaLetter">—</div></div>
      <div class="ov"><div class="label">Percent Avg</div><div class="value" id="gpaPct">0%</div></div>
    </section>

    <footer>© 2026 MySemester. All Rights Reserved.</footer><dialog id="profileModal">
      <form id="profileForm" style="margin:0; max-width: 860px;">
        <div class="modal-head">
          <ion-icon name="person-outline"></ion-icon>
          <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;">Profile</span>
        </div>

        <div class="modal-body" style="background:var(--bg);padding:28px 32px;display:flex;flex-direction:column;gap:24px;"><div style="display:flex;align-items:center;gap:22px;flex-wrap:wrap;">
            <div style="position:relative;display:flex;align-items:center;justify-content:center;">
              <img id="profilePicPreview" src="https://api.dicebear.com/7.x/initials/svg?seed=User"
                   alt="Profile Picture"
                   style="width:100px;height:100px;border-radius:50%;object-fit:cover;border:3px solid var(--line);background:#f3f4f6;">
              <label for="profilePicInput"
                     style="position:absolute;bottom:-8px;right:-8px;background:var(--blue);color:white;padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;box-shadow:0 2px 8px rgba(0,0,0,0.15);">Change</label>
              <input type="file" id="profilePicInput" accept="image/*" style="display:none;" />
            </div>
            <div style="flex:1;min-width:220px;">
              <p style="font-size:13px;color:var(--muted);margin:4px 0 0;">PNG or JPG, up to ~3MB</p>
            </div>
          </div><div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Full Name</label>
              <input id="profileNameInput" type="text" placeholder="Full Name" />
            </div>
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Nickname</label>
              <input id="profileNickInput" type="text" placeholder="Preferred Nickname" />
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Email</label>
              <input id="profileEmailInput" type="email" placeholder="you@example.com" />
            </div>
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Current Password</label>
              <div class="pw-field" style="position:relative;">
                <input id="profileCurrentPw" type="password" placeholder="Current password" style="width:100%;" />
                <ion-icon name="eye-outline" class="pw-eye" data-target="profileCurrentPw"
                          style="position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:18px;color:var(--muted);cursor:pointer;"></ion-icon>
              </div>
            </div>
          </div>

          <div style="display:grid;grid-template-columns:1fr 1fr;gap:24px;">
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">New Password</label>
              <div class="pw-field" style="position:relative;">
                <input id="profileNewPw" type="password" placeholder="New password" style="width:100%;" />
                <ion-icon name="eye-outline" class="pw-eye" data-target="profileNewPw"
                          style="position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:18px;color:var(--muted);cursor:pointer;"></ion-icon>
              </div>
            </div>
            <div>
              <label style="font-size:13px;font-weight:600;color:var(--muted);">Confirm New Password</label>
              <div class="pw-field" style="position:relative;">
                <input id="profilePasswordInput" type="password" placeholder="Confirm new password" style="width:100%;" />
                <ion-icon name="eye-outline" class="pw-eye" data-target="profilePasswordInput"
                          style="position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:18px;color:var(--muted);cursor:pointer;"></ion-icon>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-actions" style="padding:18px 32px;display:flex;justify-content:flex-end;gap:12px;">
          <button type="button" class="btn-plain" id="profileCancelBtn">Cancel</button>
          <button type="submit" class="btn-primary">Save Changes</button>
        </div>
      </form>
    </dialog></main><div class="ctx" id="ctxMenu" role="menu">
    <button type="button" data-act="edit"><ion-icon name="create-outline"></ion-icon> Edit course</button>
    <button type="button" data-act="dup"><ion-icon name="copy-outline"></ion-icon> Duplicate</button>
    <button type="button" data-act="crncr">
      <ion-icon name="shield-checkmark-outline"></ion-icon>
      <span id="ctxCrncrLabel">Set CR/NCR</span>
    </button>
    <button type="button" class="danger" data-act="del"><ion-icon name="trash-outline"></ion-icon> Remove</button>
  </div><dialog id="addCourseModal">
    <form id="addCourseForm">
      <div class="modal-head"><ion-icon name="add-circle-outline"></ion-icon> <span id="modalTitle">Add Course</span></div>
      <div class="modal-body">
        <div class="modal-grid">
          <div>
            <label>Course Code</label>
            <input name="code" id="codeInput" placeholder="CSC108" />
          </div>
          <div>
            <label>Course Name</label>
            <input name="title" id="titleInput" placeholder="Intro to Computer Science" />
          </div>
        </div>
        <div class="modal-grid">
          <div>
            <label>Initial Grade (%) — optional</label>
            <input name="grade" id="gradeInput" type="number" step="0.1" min="0" max="100" placeholder="e.g., 85" />
          </div>
          <div>
            <label>Icon</label>
            <input name="icon" id="iconInput" placeholder="e.g., laptop-outline" />
            <div class="hint">Preview: <ion-icon id="iconPreview" name="book-outline"></ion-icon></div>
            <div class="hint" style="margin-bottom:2px;">
              <span class="icon-try-row-toggle" id="iconTryToggle" tabindex="0" role="button" aria-expanded="false">Try:</span>
            </div>
            <div class="icon-chip-row hide" id="iconChipRow" aria-hidden="true">
              <span class="icon-chip" data-icon="calculator-outline"><ion-icon name="calculator-outline"></ion-icon>calculator-outline <span style="color:var(--muted);font-weight:400;">(Math)</span></span>
              <span class="icon-chip" data-icon="laptop-outline"><ion-icon name="laptop-outline"></ion-icon>laptop-outline <span style="color:var(--muted);font-weight:400;">(CS)</span></span>
              <span class="icon-chip" data-icon="school-outline"><ion-icon name="school-outline"></ion-icon>school-outline <span style="color:var(--muted);font-weight:400;">(Philosophy)</span></span>
              <span class="icon-chip" data-icon="planet-outline"><ion-icon name="planet-outline"></ion-icon>planet-outline <span style="color:var(--muted);font-weight:400;">(Astronomy)</span></span>
              <span class="icon-chip" data-icon="stats-chart-outline"><ion-icon name="stats-chart-outline"></ion-icon>stats-chart-outline <span style="color:var(--muted);font-weight:400;">(Stats)</span></span>
            </div>
          </div>
        </div>
        <div class="error" id="formError">Please enter at least a course code (e.g., CSC108).</div>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn-plain" id="cancelCourse">Cancel</button>
        <button type="submit" class="btn-primary" id="saveCourse">Save Course</button>
      </div>
    </form>
  </dialog>

</dialog><dialog id="profileModal">
  <form id="profileForm" style="margin:0;">
    <div class="modal-head">
      <ion-icon name="person-outline"></ion-icon>
      <span style="font-size:20px;font-weight:700;letter-spacing:-0.01em;display:flex;align-items:center;gap:10px;">
        Profile
      </span>
    </div>
    <div class="modal-body" style="gap: 18px;">
      <div style="display:flex;align-items:center;gap:18px;">
        <img id="profilePicPreview" src="" alt="Profile Picture" style="width:58px;height:58px;border-radius:50%;object-fit:cover;background:#e5e7eb;flex-shrink:0;" />
        <div style="flex:1;">
          <label for="profilePicInput" style="font-size:13px;font-weight:600;color:var(--muted);display:block;">Profile Picture</label>
          <input type="file" id="profilePicInput" accept="image/*" style="margin-top:6px;font-size:14px;">
        </div>
      </div>
      <div class="modal-grid">
        <div>
          <label for="profileNameInput">Name</label>
          <input id="profileNameInput" name="name" autocomplete="name" placeholder="Full Name" />
        </div>
        <div>
          <label for="profileNickInput">Nickname</label>
          <input id="profileNickInput" name="nickname" autocomplete="nickname" placeholder="Preferred Name/Nickname" />
        </div>
      </div>
      <div class="modal-grid">
        <div>
          <label for="profileEmailInput">Email</label>
          <input id="profileEmailInput" name="email" type="email" autocomplete="email" placeholder="Email" />
        </div>
        <div>
          <label for="profilePasswordInput">Password</label>
          <input id="profilePasswordInput" name="password" type="password" autocomplete="new-password" placeholder="Password" />
        </div>
      </div>
    </div>
    <div class="modal-actions">
      <button type="button" class="btn-plain" id="profileCancelBtn">Cancel</button>
      <button type="submit" class="btn-primary">Save Changes</button>
    </div>
  </form>
</dialog>
<dialog id="profileModal">
  <form id="profileForm" method="dialog" style="padding: 24px; border: none; background: var(--card); border-radius: 18px; width: min(500px, 90vw); box-shadow: 0 20px 60px rgba(0,0,0,.2);">
    <h2 style="margin-top: 0; text-align: center; font-weight: 700;">Edit Profile</h2>

    <div style="display: flex; align-items: center; justify-content: center; flex-direction: column; gap: 12px; margin-bottom: 20px;">
      <img id="profilePicPreview" src="https://api.dicebear.com/7.x/initials/svg?seed=User" alt="Profile Picture" 
           style="width: 100px; height: 100px; border-radius: 50%; object-fit: cover; border: 3px solid var(--line);" />
      <label for="profilePicInput" style="font-size: 14px; color: var(--blue); font-weight: 600; cursor: pointer;">Choose Photo</label>
      <input type="file" id="profilePicInput" accept="image/*" style="display: none;" />
    </div>

    <div style="display: grid; gap: 16px;">
      <div>
        <label style="font-weight: 600; font-size: 14px;">Full Name</label>
        <input id="profileNameInput" type="text" placeholder="Enter your name" />
      </div>
      <div>
        <label style="font-weight: 600; font-size: 14px;">Nickname</label>
        <input id="profileNickInput" type="text" placeholder="Optional nickname" />
      </div>
      <div>
        <label style="font-weight: 600; font-size: 14px;">Email</label>
        <input id="profileEmailInput" type="email" placeholder="you@example.com" />
      </div>
      <div>
        <label style="font-weight: 600; font-size: 14px;">Change Password</label>
        <input id="profilePasswordInput" type="password" placeholder="Enter new password" />
      </div>
    </div>

    <div style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 20px;">
      <button type="button" class="btn-plain" id="profileCancelBtn">Cancel</button>
      <button type="submit" class="btn-primary">Save Changes</button>
    </div>
  </form>
</dialog>

</dialog>
